{% extends 'base.html' %}

{% block title %}USL | Lab Requests{% endblock %}

{% block content %}

<div class="container my-5">
    {% with messages = get_flashed_messages(with_categories=True) %}
    {% if messages %}
            {% for category, message in messages %}
                {% if category == 'success' %}
                    <div class="alert alert-success mx-5" role="alert">
                        {{ message }}
                    </div>
                {% else %}
                    <div class="alert alert-danger mx-5" role="alert">
                        {{ message }}
                    </div>
                {% endif %}
            {% endfor %}
    {% endif %}
    {% endwith %}
</div>



<div class="container my-5">

    <div class="table-responsive mx-5">
        <table class="table">
            <thead>
                <tr>
                    <th class="text-center" scope="col">Test Name</th>
                    <th class="text-center" scope="col">Sample Name</th>
                    <th class="text-center" scope="col">Sample Description</th>
                    <th class="text-center" scope="col">Turnaround [days]</th>
                    <th class="text-center" scope="col">Current Status</th>
                    <th class="text-center" scope="col">Approve/Deny</th>
                </tr>
            </thead>
    
    
            <tbody>
                {% for lab_request in lab_requests %}
                    <tr>
                        <td class="text-center">{{ lab_request.test_name }}</td>
                        <td class="text-center">{{ lab_request.sample_name }}</td>
                        <td class="text-center">{{ lab_request.sample_description }}</td>
                        <td class="text-center">{{ lab_request.turnaround }}</td>
                        <td class="text-center">{{ lab_request.status }}</td>

                        <td class="text-center">
                            
                            <form action="{{ url_for('views.lab_requests') }}" method="POST">
                                <!--pass extra data to the Flask route-->
                                <input type="hidden" name="id" value="{{ lab_request.request_id }}">
                                <input type="hidden" name="action" value="approve">
                                <input type="submit" class="btn btn-outline-success my-1" value="Approve">
                            </form>

                            <form action="{{ url_for('views.lab_requests') }}" method="POST">
                                <input type="hidden" name="id" value="{{ lab_request.request_id }}">
                                <input type="hidden" name="action" value="deny">
                                <input type="submit" class="btn btn-outline-danger my-1" value="Deny">
                            </form>

                        </td>
                    </tr>
    
                {% endfor %}
            </tbody>
    
        </table>
    
    </div>



</div>


{% endblock %}